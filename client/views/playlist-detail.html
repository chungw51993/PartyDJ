<div class="container">
  <a class="back" ng-href="/playlist" ng-if="ctrl.user">Back to List</a>
  <h1 class="detail-title">{{ ctrl.playlist.name }}</h1>
  <a class="spotify-login list-login" ng-href="/api/user/login" ng-if="!ctrl.user" target="_self">Login with Spotify</a>

  <music-player current="ctrl.currentSong" tracks="ctrl.tracks" next="ctrl.nextTrack" user="ctrl.user" playlist="ctrl.playlist"></music-player>

  <div ng-if="ctrl.currentSong.name !== 'Title'">
    <h3>Current Song</h3>
    <track-item class="trackItem" track="ctrl.currentSong" service="ctrl.deleteTrack"></track-item>
  </div>

  <h3>Upcoming Songs</h3>
  <track-item class="trackItem" ng-repeat="track in ctrl.tracks" track="track" user="ctrl.user" service="ctrl.deleteTrack" playlist="ctrl.playlist" status="false"></track-item>

  <h3>Songs Already Played</h3>
  <track-item class="trackItem" ng-repeat="track in ctrl.played" track="track" user="ctrl.user" service="ctrl.deleteTrack" playlist="ctrl.playlist" status="true"></track-item>

  <button ng-if="ctrl.user" class="add mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored" ng-click="ctrl.showAddTrackPopup()">
    <i class="material-icons">add</i>
  </button>
</div>

<div class="popup" ng-if="ctrl.showAddTrack">
  <div class="mdl-card mdl-shadow--8dp">
    <h4>Search by the song name</h4>
    <input class="search" ng-model="ctrl.query" placeholder="Search" ng-change="ctrl.searchTrack(ctrl.query)">
    <div class="searchItem">
      <search-item ng-if="ctrl.showSearchList" ng-repeat="song in ctrl.search" track="song" add="ctrl.addTrack"></search-item>
    </div>
    <button class="cancel" ng-click="ctrl.cancelAdd()">Cancel</button>
  </div>
</div>